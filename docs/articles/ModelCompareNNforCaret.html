<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1.3.2 Compare nnfor::mlp() models â€¢ tswgewrapped</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="1.3.2 Compare nnfor::mlp() models">
<meta property="og:description" content="tswgewrapped">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tswgewrapped</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.10.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ModelBuildMultivariateVAR.html">1.2.1 Build Multivariate VAR Models</a>
    </li>
    <li>
      <a href="../articles/ModelCombine.html">2.0 Combine Models</a>
    </li>
    <li>
      <a href="../articles/ModelCompareMultivariateVAR.html">1.2.2 Compare Multivariate VAR Models</a>
    </li>
    <li>
      <a href="../articles/ModelCompareNNforCaret.html">1.3.2 Compare nnfor::mlp() models</a>
    </li>
    <li>
      <a href="../articles/ModelCompareUnivariate.html">1.1.2 Compare Univariate Models</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>1.3.2 Compare nnfor::mlp() models</h1>
            
      
      
      <div class="hidden name"><code>ModelCompareNNforCaret.Rmd</code></div>

    </div>

    
    
<div id="setup-libraries" class="section level1">
<h1 class="hasAnchor">
<a href="#setup-libraries" class="anchor"></a>Setup Libraries</h1>
<div class="sourceCode"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tswgewrapped</span>)</pre></body></html></div>
</div>
<div id="load-data" class="section level1">
<h1 class="hasAnchor">
<a href="#load-data" class="anchor"></a>Load Data</h1>
<div class="sourceCode"><html><body><pre class="r">file = system.file("extdata", "USeconomic.csv", package = "tswgewrapped", mustWork = TRUE)
USeconomic = read.csv(file, header = TRUE, stringsAsFactors = FALSE, check.names = FALSE)
names(USeconomic) = gsub("[(|)]", "", colnames(USeconomic))
data = USeconomic</pre></body></html></div>
</div>
<div id="build-caret-model" class="section level1">
<h1 class="hasAnchor">
<a href="#build-caret-model" class="anchor"></a>Build caret model</h1>
<p><strong>Since this process takes some time, I have commented this out for now and saved an already created caret model. However, feel free to uncomment this and run the model build process.</strong></p>
<div class="sourceCode"><html><body><pre class="r"># library(caret)
# 
# # Random Parallel
# model = ModelBuildNNforCaret$new(data = data, var_interest = "logGNP", m = 2,
#                                  search = 'random',
#                                  grid = NA, tuneLength = 2,
#                                  batch_size = 132, h = 2,
#                                  parallel = TRUE,
#                                  seed = 1,
#                                  verbose = 1)
# 
# model$summarize_hyperparam_results()
# model$plot_hyperparam_results()
# 
# model$summarize_best_hyperparams()
# model$summarize_build()
# 
# caret_model = model$get_final_models(subset = 'a')</pre></body></html></div>
</div>
<div id="load-already-saved-caret-model" class="section level1">
<h1 class="hasAnchor">
<a href="#load-already-saved-caret-model" class="anchor"></a>Load already saved caret model</h1>
<div class="sourceCode"><html><body><pre class="r">file = system.file("extdata", "caret_model_batch_ase.rds", package = "tswgewrapped", mustWork = TRUE)
caret_model = readRDS(file)</pre></body></html></div>
</div>
<div id="initialize-the-modelcomparemultivariatevar-object" class="section level1">
<h1 class="hasAnchor">
<a href="#initialize-the-modelcomparemultivariatevar-object" class="anchor"></a>Initialize the ModelCompareMultivariateVAR object</h1>
<div class="sourceCode"><html><body><pre class="r">mdl_compare = ModelCompareNNforCaret$new(data = data, var_interest = 'logGNP',
                                         mdl_list = caret_model,
                                         verbose = 1)
#&gt; 
#&gt; Computing metrics for:  reps15_hd5_sdetFALSE
#&gt; Warning in private$models[[name]]$ASEs = res$ASEs: Coercing LHS to a list
#&gt; 
#&gt; Computing metrics for:  reps19_hd2_sdetFALSE
#&gt; Warning in private$models[[name]]$ASEs = res$ASEs: Coercing LHS to a list
#&gt; NULL</pre></body></html></div>
</div>
<div id="compare-the-models" class="section level1">
<h1 class="hasAnchor">
<a href="#compare-the-models" class="anchor"></a>Compare the models</h1>
<div id="compare-boxplot-of-ase-values" class="section level2">
<h2 class="hasAnchor">
<a href="#compare-boxplot-of-ase-values" class="anchor"></a>Compare boxplot of ASE values</h2>
<div class="sourceCode"><html><body><pre class="r"><span class="no">p</span> <span class="kw">=</span> <span class="no">mdl_compare</span>$<span class="fu">plot_boxplot_ases</span>()</pre></body></html></div>
<p><img src="ModelCompareNNforCaret_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
</div>
<div id="statistically-compare-the-models" class="section level2">
<h2 class="hasAnchor">
<a href="#statistically-compare-the-models" class="anchor"></a>Statistically Compare the models</h2>
<div class="sourceCode"><html><body><pre class="r">mdl_compare$statistical_compare()  
#&gt;             Df    Sum Sq   Mean Sq F value Pr(&gt;F)
#&gt; Model        1 1.803e-08 1.803e-08    0.34  0.591
#&gt; Residuals    4 2.121e-07 5.302e-08               
#&gt; 
#&gt; 
#&gt;   Tukey multiple comparisons of means
#&gt;     95% family-wise confidence level
#&gt; 
#&gt; Fit: aov(formula = ASE ~ Model, data = results)
#&gt; 
#&gt; $Model
#&gt;                                                    diff           lwr
#&gt; reps19_hd2_sdetFALSE-reps15_hd5_sdetFALSE -0.0001096261 -0.0006316118
#&gt;                                                    upr     p adj
#&gt; reps19_hd2_sdetFALSE-reps15_hd5_sdetFALSE 0.0004123596 0.5911161
#&gt; Call:
#&gt;    aov(formula = ASE ~ Model, data = results)
#&gt; 
#&gt; Terms:
#&gt;                        Model    Residuals
#&gt; Sum of Squares  1.802683e-08 2.120736e-07
#&gt; Deg. of Freedom            1            4
#&gt; 
#&gt; Residual standard error: 0.0002302572
#&gt; Estimated effects may be unbalanced</pre></body></html></div>
</div>
<div id="simple-forecasts-with-various-options" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-forecasts-with-various-options" class="anchor"></a>Simple Forecasts (with various options)</h2>
<p><strong>This is not currently supported since it needs future values to be passed and we dont have these values yet (unless we forecast them). We will add this functionality in the future.</strong></p>
<div class="sourceCode"><html><body><pre class="r">p = mdl_compare$plot_simple_forecasts()
#&gt; This function is not supported for nnfor::mlp at this time.</pre></body></html></div>
<p><img src="ModelCompareNNforCaret_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
</div>
<div id="plot-and-compare-the-forecasts-per-batch" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-and-compare-the-forecasts-per-batch" class="anchor"></a>Plot and compare the forecasts per batch</h2>
<div class="sourceCode"><html><body><pre class="r"><span class="no">p</span> <span class="kw">=</span> <span class="no">mdl_compare</span>$<span class="fu">plot_batch_forecasts</span>()</pre></body></html></div>
<p><img src="ModelCompareNNforCaret_files/figure-html/unnamed-chunk-9-1.png" width="768"><img src="ModelCompareNNforCaret_files/figure-html/unnamed-chunk-9-2.png" width="768"></p>
</div>
<div id="plot-and-compare-the-ases-per-batch" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-and-compare-the-ases-per-batch" class="anchor"></a>Plot and compare the ASEs per batch</h2>
<div class="sourceCode"><html><body><pre class="r">p = mdl_compare$plot_batch_ases() 
#&gt; Loading required namespace: patchwork
#&gt; Warning: Removed 260 row(s) containing missing values (geom_path).</pre></body></html></div>
<p><img src="ModelCompareNNforCaret_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
</div>
<div id="raw-data-and-metrics" class="section level2">
<h2 class="hasAnchor">
<a href="#raw-data-and-metrics" class="anchor"></a>Raw Data and Metrics</h2>
<div class="sourceCode"><html><body><pre class="r">ASEs = mdl_compare$get_tabular_metrics(ases = TRUE)
print(ASEs)
#&gt; # A tibble: 6 x 5
#&gt;   Model                      ASE Time_Test_Start Time_Test_End Batch
#&gt;   <chr><dbl><dbl><dbl><dbl>
#&gt; 1 reps15_hd5_sdetFALSE 0.0000449             131           132     1
#&gt; 2 reps15_hd5_sdetFALSE 0.000605              133           134     2
#&gt; 3 reps15_hd5_sdetFALSE 0.0000461             135           136     3
#&gt; 4 reps19_hd2_sdetFALSE 0.000124              131           132     1
#&gt; 5 reps19_hd2_sdetFALSE 0.000163              133           134     2
#&gt; 6 reps19_hd2_sdetFALSE 0.0000810             135           136     3</dbl></dbl></dbl></dbl></chr></pre></body></html></div>
<div class="sourceCode"><html><body><pre class="r">forecasts = mdl_compare$get_tabular_metrics(ases = FALSE)
print(forecasts)
#&gt; # A tibble: 148 x 5
#&gt;    Model                 Time     f    ll    ul
#&gt;    <chr><dbl><dbl><dbl><dbl>
#&gt;  1 reps15_hd5_sdetFALSE   131  8.23  8.23  8.23
#&gt;  2 reps15_hd5_sdetFALSE   132  8.23  8.23  8.23
#&gt;  3 reps15_hd5_sdetFALSE   133  8.22  8.22  8.22
#&gt;  4 reps15_hd5_sdetFALSE   134  8.22  8.22  8.22
#&gt;  5 reps15_hd5_sdetFALSE   135  8.26  8.26  8.26
#&gt;  6 reps15_hd5_sdetFALSE   136  8.27  8.27  8.27
#&gt;  7 reps19_hd2_sdetFALSE   131  8.23  8.23  8.23
#&gt;  8 reps19_hd2_sdetFALSE   132  8.24  8.24  8.24
#&gt;  9 reps19_hd2_sdetFALSE   133  8.23  8.23  8.23
#&gt; 10 reps19_hd2_sdetFALSE   134  8.23  8.23  8.23
#&gt; # ... with 138 more rows</dbl></dbl></dbl></dbl></chr></pre></body></html></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Josephs, Nikhil Gupta.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
